version = 0.1

[[task]]
  name = "test"
  serial = true
  deps = ["clear", "jspm", "svelte", "swc", "babel", "check"]

[[task]]
  name = "check"
  deps = ["app-build.html", "test.js"]
  run = "echo \"TESTS OK\""

[[task]]
  name = "clear"
  run = """
    rm -r node_modules
    rm package.json
    rm package-lock.json
    rm test.js
    rm test.js.map
    rm -r lib
    rm app-build.html
    rm test-babel.js
    rm test-babel.js.map
    # this line clears any error code
    echo cleared
  """

[[task]]
  name = "jspm"
  template = "jspm:generate"
  target = "app-build.html"
  deps = ["app.html"]
  [task.args]
    autoInstall = true

[[task]]
  name = "svelte"
  template = "svelte"
  target = "lib/test.js"
  deps = ["src/test.svelte"]
  [task.args]
    autoInstall = true

[[task]]
  name = "swc"
  template = "swc"
  target = "test.js"
  deps = ["test.ts"]
  [task.args]
    autoInstall = true

[[task]]
  name = "babel"
  template = "babel"
  target = "test-babel.js"
  deps = ["test.ts"]
  [task.args]
    presets = ['@babel/preset-typescript']
    autoInstall = true